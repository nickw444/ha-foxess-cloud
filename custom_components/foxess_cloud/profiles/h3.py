"""Device series profile for H3 inverters."""

from __future__ import annotations

from homeassistant.components.sensor import SensorDeviceClass, SensorStateClass
from homeassistant.config_entries import ConfigEntry
from homeassistant.const import (
    PERCENTAGE,
    UnitOfElectricCurrent,
    UnitOfElectricPotential,
    UnitOfEnergy,
    UnitOfFrequency,
    UnitOfPower,
    UnitOfTemperature,
)
from homeassistant.core import HomeAssistant
from homeassistant.helpers.entity import DeviceInfo, EntityCategory
from homeassistant.helpers.entity_platform import AddEntitiesCallback

from .base import DeviceSeriesProfile
from ..coordinator import FoxESSCloudRealTimeCoordinator
from ..sensor import FoxESSRealTimeSensor, FoxESSRunningStateSensor


class H3DeviceSeriesProfile(DeviceSeriesProfile):
    """Profile implementation for H3 series devices."""

    profile_id = "h3"

    def realtime_variables(self) -> list[str] | None:
        return [
            "pvPower",
            "pv1Volt",
            "pv1Current",
            "pv1Power",
            "pv2Volt",
            "pv2Current",
            "pv2Power",
            "pv3Volt",
            "pv3Current",
            "pv3Power",
            "epsPower",
            "epsCurrentR",
            "epsVoltR",
            "epsPowerR",
            "epsCurrentS",
            "epsVoltS",
            "epsPowerS",
            "epsCurrentT",
            "epsVoltT",
            "epsPowerT",
            "RCurrent",
            "RVolt",
            "RFreq",
            "RPower",
            "SCurrent",
            "SVolt",
            "SPower",
            "TCurrent",
            "TVolt",
            "TPower",
            "ambientTemperation",
            "invTemperation",
            # H3 devices return battery values with a `_1` suffix, but the request variable
            # names need to be the base name (e.g. request `SoC` and receive `SoC_1`).
            "batTemperature",
            "loadsPower",
            "loadsPowerR",
            "loadsPowerS",
            "loadsPowerT",
            "generationPower",
            "feedinPower",
            "gridConsumptionPower",
            "invBatVolt",
            "invBatCurrent",
            "invBatPower",
            "batChargePower",
            "batDischargePower",
            "batVolt",
            "batCurrent",
            "meterPower",
            "meterPower2",
            "meterPowerR",
            "meterPowerS",
            "meterPowerT",
            "SoC",
            "generation",
            "runningState",
            "currentFault",
            "currentFaultCount",
            "gridConsumption",
            "loads",
            "feedin",
            "chargeEnergyToTal",
            "dischargeEnergyToTal",
            "PVEnergyTotal",
        ]

    async def async_setup_entry_sensor(  # noqa: PLR0915
        self,
        hass: HomeAssistant,
        entry: ConfigEntry,
        async_add_entities: AddEntitiesCallback,
        *,
        device_sn: str,
        device_info: DeviceInfo,
        coordinator: FoxESSCloudRealTimeCoordinator,
    ) -> None:
        async_add_entities(
            [
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="pvPower",
                    translation_key="pv_power",
                    device_class=SensorDeviceClass.POWER,
                    state_class=SensorStateClass.MEASUREMENT,
                    native_unit_of_measurement=UnitOfPower.KILO_WATT,
                    value_converter=float,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="pv1Volt",
                    translation_key="pv1_voltage",
                    entity_registry_enabled_default=False,
                    device_class=SensorDeviceClass.VOLTAGE,
                    state_class=SensorStateClass.MEASUREMENT,
                    native_unit_of_measurement=UnitOfElectricPotential.VOLT,
                    value_converter=float,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="pv1Current",
                    translation_key="pv1_current",
                    entity_registry_enabled_default=False,
                    device_class=SensorDeviceClass.CURRENT,
                    state_class=SensorStateClass.MEASUREMENT,
                    native_unit_of_measurement=UnitOfElectricCurrent.AMPERE,
                    value_converter=float,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="pv1Power",
                    translation_key="pv1_power",
                    entity_registry_enabled_default=False,
                    device_class=SensorDeviceClass.POWER,
                    state_class=SensorStateClass.MEASUREMENT,
                    native_unit_of_measurement=UnitOfPower.KILO_WATT,
                    value_converter=float,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="pv2Volt",
                    translation_key="pv2_voltage",
                    entity_registry_enabled_default=False,
                    device_class=SensorDeviceClass.VOLTAGE,
                    state_class=SensorStateClass.MEASUREMENT,
                    native_unit_of_measurement=UnitOfElectricPotential.VOLT,
                    value_converter=float,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="pv2Current",
                    translation_key="pv2_current",
                    entity_registry_enabled_default=False,
                    device_class=SensorDeviceClass.CURRENT,
                    state_class=SensorStateClass.MEASUREMENT,
                    native_unit_of_measurement=UnitOfElectricCurrent.AMPERE,
                    value_converter=float,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="pv2Power",
                    translation_key="pv2_power",
                    entity_registry_enabled_default=False,
                    device_class=SensorDeviceClass.POWER,
                    state_class=SensorStateClass.MEASUREMENT,
                    native_unit_of_measurement=UnitOfPower.KILO_WATT,
                    value_converter=float,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="pv3Volt",
                    translation_key="pv3_voltage",
                    entity_registry_enabled_default=False,
                    device_class=SensorDeviceClass.VOLTAGE,
                    state_class=SensorStateClass.MEASUREMENT,
                    native_unit_of_measurement=UnitOfElectricPotential.VOLT,
                    value_converter=float,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="pv3Current",
                    translation_key="pv3_current",
                    entity_registry_enabled_default=False,
                    device_class=SensorDeviceClass.CURRENT,
                    state_class=SensorStateClass.MEASUREMENT,
                    native_unit_of_measurement=UnitOfElectricCurrent.AMPERE,
                    value_converter=float,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="pv3Power",
                    translation_key="pv3_power",
                    entity_registry_enabled_default=False,
                    device_class=SensorDeviceClass.POWER,
                    state_class=SensorStateClass.MEASUREMENT,
                    native_unit_of_measurement=UnitOfPower.KILO_WATT,
                    value_converter=float,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="epsPower",
                    translation_key="eps_power",
                    device_class=SensorDeviceClass.POWER,
                    state_class=SensorStateClass.MEASUREMENT,
                    native_unit_of_measurement=UnitOfPower.KILO_WATT,
                    value_converter=float,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="epsCurrentR",
                    translation_key="eps_current",
                    entity_registry_enabled_default=False,
                    device_class=SensorDeviceClass.CURRENT,
                    state_class=SensorStateClass.MEASUREMENT,
                    native_unit_of_measurement=UnitOfElectricCurrent.AMPERE,
                    value_converter=float,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="epsVoltR",
                    translation_key="eps_voltage",
                    entity_registry_enabled_default=False,
                    device_class=SensorDeviceClass.VOLTAGE,
                    state_class=SensorStateClass.MEASUREMENT,
                    native_unit_of_measurement=UnitOfElectricPotential.VOLT,
                    value_converter=float,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="epsPowerR",
                    translation_key="eps_power_r",
                    entity_registry_enabled_default=False,
                    device_class=SensorDeviceClass.POWER,
                    state_class=SensorStateClass.MEASUREMENT,
                    native_unit_of_measurement=UnitOfPower.KILO_WATT,
                    value_converter=float,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="epsCurrentS",
                    translation_key="eps_current_s",
                    entity_registry_enabled_default=False,
                    device_class=SensorDeviceClass.CURRENT,
                    state_class=SensorStateClass.MEASUREMENT,
                    native_unit_of_measurement=UnitOfElectricCurrent.AMPERE,
                    value_converter=float,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="epsVoltS",
                    translation_key="eps_voltage_s",
                    entity_registry_enabled_default=False,
                    device_class=SensorDeviceClass.VOLTAGE,
                    state_class=SensorStateClass.MEASUREMENT,
                    native_unit_of_measurement=UnitOfElectricPotential.VOLT,
                    value_converter=float,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="epsPowerS",
                    translation_key="eps_power_s",
                    entity_registry_enabled_default=False,
                    device_class=SensorDeviceClass.POWER,
                    state_class=SensorStateClass.MEASUREMENT,
                    native_unit_of_measurement=UnitOfPower.KILO_WATT,
                    value_converter=float,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="epsCurrentT",
                    translation_key="eps_current_t",
                    entity_registry_enabled_default=False,
                    device_class=SensorDeviceClass.CURRENT,
                    state_class=SensorStateClass.MEASUREMENT,
                    native_unit_of_measurement=UnitOfElectricCurrent.AMPERE,
                    value_converter=float,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="epsVoltT",
                    translation_key="eps_voltage_t",
                    entity_registry_enabled_default=False,
                    device_class=SensorDeviceClass.VOLTAGE,
                    state_class=SensorStateClass.MEASUREMENT,
                    native_unit_of_measurement=UnitOfElectricPotential.VOLT,
                    value_converter=float,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="epsPowerT",
                    translation_key="eps_power_t",
                    entity_registry_enabled_default=False,
                    device_class=SensorDeviceClass.POWER,
                    state_class=SensorStateClass.MEASUREMENT,
                    native_unit_of_measurement=UnitOfPower.KILO_WATT,
                    value_converter=float,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="RCurrent",
                    translation_key="r_current",
                    entity_registry_enabled_default=False,
                    device_class=SensorDeviceClass.CURRENT,
                    state_class=SensorStateClass.MEASUREMENT,
                    native_unit_of_measurement=UnitOfElectricCurrent.AMPERE,
                    value_converter=float,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="RVolt",
                    translation_key="grid_voltage",
                    device_class=SensorDeviceClass.VOLTAGE,
                    state_class=SensorStateClass.MEASUREMENT,
                    native_unit_of_measurement=UnitOfElectricPotential.VOLT,
                    value_converter=float,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="RFreq",
                    translation_key="grid_frequency",
                    device_class=SensorDeviceClass.FREQUENCY,
                    state_class=SensorStateClass.MEASUREMENT,
                    native_unit_of_measurement=UnitOfFrequency.HERTZ,
                    value_converter=float,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="RPower",
                    translation_key="r_power",
                    entity_registry_enabled_default=False,
                    device_class=SensorDeviceClass.POWER,
                    state_class=SensorStateClass.MEASUREMENT,
                    native_unit_of_measurement=UnitOfPower.KILO_WATT,
                    value_converter=float,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="SCurrent",
                    translation_key="s_current",
                    entity_registry_enabled_default=False,
                    device_class=SensorDeviceClass.CURRENT,
                    state_class=SensorStateClass.MEASUREMENT,
                    native_unit_of_measurement=UnitOfElectricCurrent.AMPERE,
                    value_converter=float,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="SVolt",
                    translation_key="grid_voltage_s",
                    entity_registry_enabled_default=False,
                    device_class=SensorDeviceClass.VOLTAGE,
                    state_class=SensorStateClass.MEASUREMENT,
                    native_unit_of_measurement=UnitOfElectricPotential.VOLT,
                    value_converter=float,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="SPower",
                    translation_key="s_power",
                    entity_registry_enabled_default=False,
                    device_class=SensorDeviceClass.POWER,
                    state_class=SensorStateClass.MEASUREMENT,
                    native_unit_of_measurement=UnitOfPower.KILO_WATT,
                    value_converter=float,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="TCurrent",
                    translation_key="t_current",
                    entity_registry_enabled_default=False,
                    device_class=SensorDeviceClass.CURRENT,
                    state_class=SensorStateClass.MEASUREMENT,
                    native_unit_of_measurement=UnitOfElectricCurrent.AMPERE,
                    value_converter=float,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="TVolt",
                    translation_key="grid_voltage_t",
                    entity_registry_enabled_default=False,
                    device_class=SensorDeviceClass.VOLTAGE,
                    state_class=SensorStateClass.MEASUREMENT,
                    native_unit_of_measurement=UnitOfElectricPotential.VOLT,
                    value_converter=float,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="TPower",
                    translation_key="t_power",
                    entity_registry_enabled_default=False,
                    device_class=SensorDeviceClass.POWER,
                    state_class=SensorStateClass.MEASUREMENT,
                    native_unit_of_measurement=UnitOfPower.KILO_WATT,
                    value_converter=float,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="ambientTemperation",
                    translation_key="ambient_temperature",
                    device_class=SensorDeviceClass.TEMPERATURE,
                    state_class=SensorStateClass.MEASUREMENT,
                    native_unit_of_measurement=UnitOfTemperature.CELSIUS,
                    value_converter=float,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="invTemperation",
                    translation_key="inverter_temperature",
                    device_class=SensorDeviceClass.TEMPERATURE,
                    state_class=SensorStateClass.MEASUREMENT,
                    native_unit_of_measurement=UnitOfTemperature.CELSIUS,
                    value_converter=float,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="batTemperature_1",
                    translation_key="battery_temperature",
                    device_class=SensorDeviceClass.TEMPERATURE,
                    state_class=SensorStateClass.MEASUREMENT,
                    native_unit_of_measurement=UnitOfTemperature.CELSIUS,
                    value_converter=float,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="loadsPower",
                    translation_key="loads_power",
                    device_class=SensorDeviceClass.POWER,
                    state_class=SensorStateClass.MEASUREMENT,
                    native_unit_of_measurement=UnitOfPower.KILO_WATT,
                    value_converter=float,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="loadsPowerR",
                    translation_key="loads_power_r",
                    entity_registry_enabled_default=False,
                    device_class=SensorDeviceClass.POWER,
                    state_class=SensorStateClass.MEASUREMENT,
                    native_unit_of_measurement=UnitOfPower.KILO_WATT,
                    value_converter=float,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="loadsPowerS",
                    translation_key="loads_power_s",
                    entity_registry_enabled_default=False,
                    device_class=SensorDeviceClass.POWER,
                    state_class=SensorStateClass.MEASUREMENT,
                    native_unit_of_measurement=UnitOfPower.KILO_WATT,
                    value_converter=float,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="loadsPowerT",
                    translation_key="loads_power_t",
                    entity_registry_enabled_default=False,
                    device_class=SensorDeviceClass.POWER,
                    state_class=SensorStateClass.MEASUREMENT,
                    native_unit_of_measurement=UnitOfPower.KILO_WATT,
                    value_converter=float,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="generationPower",
                    translation_key="generation_power",
                    device_class=SensorDeviceClass.POWER,
                    state_class=SensorStateClass.MEASUREMENT,
                    native_unit_of_measurement=UnitOfPower.KILO_WATT,
                    value_converter=float,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="feedinPower",
                    translation_key="feedin_power",
                    device_class=SensorDeviceClass.POWER,
                    state_class=SensorStateClass.MEASUREMENT,
                    native_unit_of_measurement=UnitOfPower.KILO_WATT,
                    value_converter=float,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="gridConsumptionPower",
                    translation_key="grid_consumption_power",
                    device_class=SensorDeviceClass.POWER,
                    state_class=SensorStateClass.MEASUREMENT,
                    native_unit_of_measurement=UnitOfPower.KILO_WATT,
                    value_converter=float,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="invBatVolt",
                    translation_key="inverter_battery_voltage",
                    entity_registry_enabled_default=False,
                    device_class=SensorDeviceClass.VOLTAGE,
                    state_class=SensorStateClass.MEASUREMENT,
                    native_unit_of_measurement=UnitOfElectricPotential.VOLT,
                    value_converter=float,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="invBatCurrent",
                    translation_key="inverter_battery_current",
                    entity_registry_enabled_default=False,
                    device_class=SensorDeviceClass.CURRENT,
                    state_class=SensorStateClass.MEASUREMENT,
                    native_unit_of_measurement=UnitOfElectricCurrent.AMPERE,
                    value_converter=float,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="invBatPower_1",
                    translation_key="inverter_battery_power",
                    entity_registry_enabled_default=False,
                    device_class=SensorDeviceClass.POWER,
                    state_class=SensorStateClass.MEASUREMENT,
                    native_unit_of_measurement=UnitOfPower.KILO_WATT,
                    value_converter=float,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="batChargePower",
                    translation_key="battery_charge_power",
                    device_class=SensorDeviceClass.POWER,
                    state_class=SensorStateClass.MEASUREMENT,
                    native_unit_of_measurement=UnitOfPower.KILO_WATT,
                    value_converter=float,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="batDischargePower",
                    translation_key="battery_discharge_power",
                    device_class=SensorDeviceClass.POWER,
                    state_class=SensorStateClass.MEASUREMENT,
                    native_unit_of_measurement=UnitOfPower.KILO_WATT,
                    value_converter=float,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="batVolt_1",
                    translation_key="battery_voltage",
                    device_class=SensorDeviceClass.VOLTAGE,
                    state_class=SensorStateClass.MEASUREMENT,
                    native_unit_of_measurement=UnitOfElectricPotential.VOLT,
                    value_converter=float,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="batCurrent_1",
                    translation_key="battery_current",
                    device_class=SensorDeviceClass.CURRENT,
                    state_class=SensorStateClass.MEASUREMENT,
                    native_unit_of_measurement=UnitOfElectricCurrent.AMPERE,
                    value_converter=float,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="meterPower",
                    translation_key="meter_power",
                    device_class=SensorDeviceClass.POWER,
                    state_class=SensorStateClass.MEASUREMENT,
                    native_unit_of_measurement=UnitOfPower.KILO_WATT,
                    value_converter=float,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="meterPower2",
                    translation_key="meter_power_2",
                    entity_registry_enabled_default=False,
                    device_class=SensorDeviceClass.POWER,
                    state_class=SensorStateClass.MEASUREMENT,
                    native_unit_of_measurement=UnitOfPower.KILO_WATT,
                    value_converter=float,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="meterPowerR",
                    translation_key="meter_power_r",
                    entity_registry_enabled_default=False,
                    device_class=SensorDeviceClass.POWER,
                    state_class=SensorStateClass.MEASUREMENT,
                    native_unit_of_measurement=UnitOfPower.KILO_WATT,
                    value_converter=float,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="meterPowerS",
                    translation_key="meter_power_s",
                    entity_registry_enabled_default=False,
                    device_class=SensorDeviceClass.POWER,
                    state_class=SensorStateClass.MEASUREMENT,
                    native_unit_of_measurement=UnitOfPower.KILO_WATT,
                    value_converter=float,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="meterPowerT",
                    translation_key="meter_power_t",
                    entity_registry_enabled_default=False,
                    device_class=SensorDeviceClass.POWER,
                    state_class=SensorStateClass.MEASUREMENT,
                    native_unit_of_measurement=UnitOfPower.KILO_WATT,
                    value_converter=float,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="SoC_1",
                    translation_key="battery_soc",
                    device_class=SensorDeviceClass.BATTERY,
                    state_class=SensorStateClass.MEASUREMENT,
                    native_unit_of_measurement=PERCENTAGE,
                    value_converter=float,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="generation",
                    translation_key="generation",
                    device_class=SensorDeviceClass.ENERGY,
                    state_class=SensorStateClass.TOTAL_INCREASING,
                    native_unit_of_measurement=UnitOfEnergy.KILO_WATT_HOUR,
                    value_converter=float,
                ),
                FoxESSRunningStateSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="currentFaultCount",
                    translation_key="current_fault_count",
                    state_class=SensorStateClass.MEASUREMENT,
                    native_unit_of_measurement="faults",
                    value_converter=lambda v: int(float(v)),
                    entity_category=EntityCategory.DIAGNOSTIC,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="gridConsumption",
                    translation_key="grid_consumption",
                    device_class=SensorDeviceClass.ENERGY,
                    state_class=SensorStateClass.TOTAL_INCREASING,
                    native_unit_of_measurement=UnitOfEnergy.KILO_WATT_HOUR,
                    value_converter=float,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="loads",
                    translation_key="loads",
                    device_class=SensorDeviceClass.ENERGY,
                    state_class=SensorStateClass.TOTAL_INCREASING,
                    native_unit_of_measurement=UnitOfEnergy.KILO_WATT_HOUR,
                    value_converter=float,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="feedin",
                    translation_key="feedin",
                    device_class=SensorDeviceClass.ENERGY,
                    state_class=SensorStateClass.TOTAL_INCREASING,
                    native_unit_of_measurement=UnitOfEnergy.KILO_WATT_HOUR,
                    value_converter=float,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="chargeEnergyToTal",
                    translation_key="charge_energy_total",
                    device_class=SensorDeviceClass.ENERGY,
                    state_class=SensorStateClass.TOTAL_INCREASING,
                    native_unit_of_measurement=UnitOfEnergy.KILO_WATT_HOUR,
                    value_converter=float,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="dischargeEnergyToTal",
                    translation_key="discharge_energy_total",
                    device_class=SensorDeviceClass.ENERGY,
                    state_class=SensorStateClass.TOTAL_INCREASING,
                    native_unit_of_measurement=UnitOfEnergy.KILO_WATT_HOUR,
                    value_converter=float,
                ),
                FoxESSRealTimeSensor(
                    coordinator=coordinator,
                    device_sn=device_sn,
                    device_info=device_info,
                    variable_key="PVEnergyTotal",
                    translation_key="pv_energy_total",
                    device_class=SensorDeviceClass.ENERGY,
                    state_class=SensorStateClass.TOTAL_INCREASING,
                    native_unit_of_measurement=UnitOfEnergy.KILO_WATT_HOUR,
                    value_converter=float,
                ),
            ]
        )
